# Informations
# File   : ~/.tmux.conf
# Purpose: Setup file for the terminal multiplexer called "tmux"
# Author : Christian 'strcat' Schneider <strcat@gmx.net>
# NOTE 1 : Lines starting with an '#' are comments.
# NOTE 2 : Used and tested with OpenBSD, Debian. void Linux and tmux 2.9

# Remove the fucking Esc-Wait (VIM works!!!111!)
set-option -sg  escape-time 0
set-option -g set-clipboard on
set-option -g @fastcopy-action 'tmux load-buffer -w -'

# New session
bind-key n command-prompt -p "New session name:" "new-session -s '%%'"


# Enable RGB color if running in xterm(1)
# set-option -sa terminal-overrides ",xtermj*:Tc"
# Enable curly-underscore
# set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'
# set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'  # underscore colours - needs tmux-3.0

# # Add truecolor support - WONT WORKS ON URXVT
# set -ga terminal-overrides ",xterm-termite:Tc"

# set -g default-terminal "screen-256color"
# set-option -sa terminal-overrides ",xterm-kitty:RGB"
# # 256color, do u speak it?!
set-option -g default-terminal "tmux-256color"
# - IDK how, but this allows strikethrough text with highlights
set -g default-terminal "${TERM}"
# Set the command for new windows to "zsh"
set -g default-command zsh

# When enabled, focus events are requested from the terminal
set-option -g focus-events on

# Msg display time 2 sec
set -g display-time 2000

# GNU Emacs keys
set-window-option -g mode-keys emacs
set-option -g status-keys emacs

# Keybindings
# Set the prefix to ^A.
  set    -g prefix C-a
  unbind C-b
  bind   C-a send-prefix
# C-a a switch to last-window
  unbind ^A
  bind ^A last-window

# unbind default binding to force redraw of attacheed client
  bind r source-file ~/.tmux.conf \; display "Finished sourcing ~/.tmux.conf ."
# Use F8/F9 and Ctrl-arrow keys without prefix key to switch windows
  bind -n C-Up previous-window
  bind -n C-Down next-window
  bind -n F9 next-window
  bind -n F8 previous-window
# Resize window
# The -r flag passed into the binding makes it repeatable. So when you
# press your prefix, you have a certain time to hammer > for example to
# make the pane increase to the right. The time you got depends on your
# repeat-time option which defaults to 500 milliseconds.
  bind-key -r "+" resize-pane -U 5
  bind-key -r "-" resize-pane -D 5
  bind-key -r "<" resize-pane -L 5
  bind-key -r ">" resize-pane -R 5
# Split easy.. and in the current path!
  bind v split-window -h -c "#{pane_current_path}"
  bind h split-window -v -c "#{pane_current_path}"
# tmux, mutt and vim use ":" for commands, so..
  unbind-key :      ; bind-key :      command-prompt -p "tmux:"
  unbind-key g      ; bind-key g      command-prompt -p "number:" "move-window -t '%%'"
  unbind-key A      ; bind-key A      command-prompt -p "rename:" "rename-window %%"
  unbind-key K      ; bind-key K      confirm-before    "kill-window"
# open a man page in new window
  bind / command-prompt "split-window -v 'exec man %%'"
# Choose Window
  bind m choose-window
# Toggle status-line (distraction-free writing)
  bind-key Q set-option status
# Move window in tmux left/right (C-A Shift+Left/Right)
  bind-key S-Left swap-window -t -1
  bind-key S-Right swap-window -t +1

 set-window-option -g monitor-activity on
# sometimes needed.. maybe..
setw -g xterm-keys on

# scrollback buffer n lines
set -g history-limit 5000

# listen for activity on all windows
set -g bell-action any

# enable wm window titles
set -g set-titles on

# New session called ``Workstation''
new -s Workstation
 # Mutt
  neww -t 1 -nMutt  neomutt
  bind-key E new-window -n "Mutt" -t 1 neomutt
 # Slrn
  neww -t 2 -nSlrn 'slrn -C -n --kill-log  /home/dope/.slang/KILL --spool'
  bind-key N new-window -n "Slrn" 'slrn -C -n --kill-log /home/dope/.slang/KILL --spool'
 # cmus/ncmpcpp/rmpc.. because fuck you.. thats why
  neww -t 3 -nrmpc -n "rmpc" rmpc
 # Gopher
  # neww -t 4 -nGopher gopherus
 # Newsboat
  neww -t 5 -nNewsboat newsboat
 # Irssi
  neww -t 9 -nIrssi irssi
  bind-key I new-window -n "Irssi" -t 9 irssi

# Turn monior-activity for rtorrent, cmus and irssi *off*
set-window-option -t:1 monitor-activity off # Mutt
set-window-option -t:2 monitor-activity off # Slrn
set-window-option -t:3 monitor-activity off # ncmpcpp
# set-window-option -t:4 monitor-activity off # Gopher
set-window-option -t:5 monitor-activity off # Newsboat
set-window-option -t:9 monitor-activity off # Irssi

# start windows numbering at 0
set -g base-index 0

# make pane numbering consistent with windows
setw -g pane-base-index 1

# rename window to reflect current program
setw -g automatic-rename on

# renumber windows when a window is closed
set -g renumber-windows off

set -g allow-passthrough on

# Set a space-separated string containing a list of envi‐ ronment
# variables to be copied into the session environ‐ ment when a new
# session is created or an existing session is attached
set -g update-environment "DISPLAY WINDOWID TERM TERM_PROGRAM SSH_ASKPASS SSH_AUTH_SOCK SSH_AGENT_PID SSH_CONNECTION GNOME_KEYRING_PID GNOME_KEYRING_SOCKET"

# "Theming"
# Set the position of the window list component of the status line: left
  set -g status-justify left
# Set colors and attributes for the status line
  set -g status-style bg=default
# Modes (i.e. scroll indicator)
  # setw -g mode-style 'fg=colour237 bg=colour5 bold'
  setw -g mode-style fg=colour196,bg=colour238
# Status left
  set-option -g status-left-length 700
  set-option -g status-left "#[fg=colour27]#H"
  set-option -g status-left "#[fg=colour38,dim]#H #[default]"
  set-option -ga status-left "#[fg=colour243,bold]» #[default]"
  set-option -ga status-left "#[fg=colour38,dim]#S"
  set-option -ga status-left "#[fg=colour249,dim]:#I"
  set-option -ga status-left "#[fg=colour243,bold] » #[default]"
# Set colors and attributes for the window status text
  set-window-option -g window-status-style fg=colour246,bg=default
# Configure contents in window status
  set -g window-status-format "#I:#W#F"
  set -g window-status-current-format "#I:#W#F"
# Set colors and attributes for status line messages
  set-option -g message-style fg=white,bg=colour65,bright
# Set status line style for the last active window.
  set -g window-status-last-style fg=colour240,italics,dim
# Set colors and attributes for the current window status text
  set-window-option -g window-status-current-style 'fg=colour94'
# Set colors and attributes for the status text of window which have an activity
  set-window-option -g window-status-activity-style fg=colour148,bg=default,bold
# Set the style of the left part of the status line.
  set-option -g status-left-style bg=default,none
# set inactive/active window styles
  set -g window-style 'fg=colour247,bg=default'
  set -g window-active-style 'fg=colour250,bg=default'
# pane border
  set -g pane-active-border-style fg="#ff3030"
  set -g pane-border-style fg="#404040"

set -g @fzf-url-fzf-options '-p 60%,30% --prompt="   " --border-label=" Open URL "'

# Tmux Plugin Manager
set -g @plugin 'tmux-plugins/tpm'
  # https://github.com/MunifTanjim/tmux-mode-indicator
  set -g @plugin 'MunifTanjim/tmux-mode-indicator'
  # https://github.com/wfxr/tmux-fzf-url (C-A u)
  set -g @plugin 'wfxr/tmux-fzf-url'
  # https://github.com/tmux-plugins/tmux-yank
  set -g @plugin 'tmux-plugins/tmux-yank'
  # https://github.com/abhinav/tmux-fastcopy
  set -g @plugin 'abhinav/tmux-fastcopy'
  # https://github.com/morantron/tmux-fingers
  set -g @plugin 'Morantron/tmux-fingers'
  # https://github.com/christoomey/vim-tmux-navigator
  set -g @plugin 'christoomey/vim-tmux-navigator'
# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
