#                     _
#  _ __ ___  __ _  __| |_ __ ___   ___
# | '__/ _ \/ _` |/ _` | '_ ` _ \ / _ \
# | | |  __/ (_| | (_| | | | | | |  __/
# |_|  \___|\__,_|\__,_|_| |_| |_|\___|
#
#
# Filename       : ~/.config/mango/config.conf
# Purpose        : setup file for MangoWC <https://mangowc.vercel.app/>
# Author         : Christian Schneider <dotfiles@strcat.de>
# Homepage       : http://www.strcat.de/
#
# Structure of this file:
#  Lines starting with '#' are comments.
#
# More option see https://github.com/DreamMaoMao/mango/wiki/

# See https://mangowc.vercel.app/docs/configuration/monitors
# HDMI is my main monitor right in front of me and DP-1 is on
# my left
# Before V0.12.0
#  monitorrule = DP-1,0.55,1,tile,0,1,0,0,1920,1080,60
#  monitorrule = HDMI-A-2,0.55,1,scroller,0,1,1925,0,2560,1440,144
# Since V0.12.0
monitorrule = name:HDMI-A-2,0.55,1,scroller,0,1,1925,0,2560,1440,144
monitorrule = name:DP-1,width:1920,height:1080,refresh:60,x:0,y:10,scale:1,vrr:0,rr:0

# NOTE: "BROWSER = foo" wont work; you have to use "ENV = BROWSER,foo"
#
# Starting with version 121, Firefox defaults to Wayland instead of XWayland and
# does not require any configuration
env = MOZ_ENABLE_WAYLAND,1
env = BROWSER,zen-browser
env = TERM,foot

# Autostart necessary processes
# TODO: Maybe try apps like
#       * udiskie
#       * vicinae
exec-once = tmkitty                                      # foot with tmux attach
exec-once = $BROWSER                                     # my browser
exec-once = clipse -listen                               # Clipboardmanager
exec-once = waybar -c ~/.config/waybar/mango.json        # status bar
exec-once = ~/bin/mangowp.sh                             # Wallpaper
exec-once = dunst                                        # notifications

# I don't use animations at all, but here are the defaults
# See https://mangowc.vercel.app/docs/visuals/animations
animations=0               # Enable animations for standard windows and
layer_animations=1         # layer shell surfaces (like bars and notifications).
animation_type_open=slide  # slide, zoom, fade, none.
animation_type_close=slide # slide, zoom, fade, none.
animation_fade_in=1        # Enable fade-in effect (0-disable, 1-enable)
animation_fade_out=1       # Enable fade-out effect (0-disable, 1-enable)
tag_animation_direction=1  # Tag animation direction (1-horizontal, 0-vertical)
zoom_initial_ratio=0.3     #Initial zoom ratio
zoom_end_ratio=0.8         # End zoom ratio
fadein_begin_opacity=0.5   # Starting opacity for fade-in animations (0.0-1.0)
fadeout_begin_opacity=0.8  # Starting opacity for fade-out animations (0.0-1.0)

# See https://mangowc.vercel.app/docs/visuals/effects#blur
blur=0                       # 1 enables blur for windows
blur_layer=0                 # 2 enables blur for layer surfaces (like bars/docks).
blur_optimized=1             # Caches the background to reduce GPU usage. Highly recommended.
blur_params_num_passes = 2   # Number of passes. Higher = smoother but more expensive
blur_params_radius = 5       # The strength (radius) of the blur.
blur_params_noise = 0.02     # Blur noise level.
blur_params_brightness = 0.9 # Blur brightness adjustment.
blur_params_contrast = 0.9   # Blur contrast adjustment.
blur_params_saturation = 1.2 # Blur saturation adjustment.

# See https://mangowc.vercel.app/docs/visuals/effects#shadows
shadows = 0              # 1 enables shadows.
layer_shadows = 0        # Enable shadows for layer surfaces.
shadow_only_floating = 1 # Only draw shadows for floating windows (saves performance).
shadows_size = 10        # Size of the shadow.
shadows_blur = 15        # Shadow blur amount.
shadows_position_x = 0   # Shadow X offset.
shadows_position_y = 0   # Shadow Y offset.

# See https://mangowc.vercel.app/docs/visuals/effects#opacity--corner-radius
border_radius=10         # Window corner radius in pixels
no_radius_when_single=1 # Disable radius if only one window is visible
focused_opacity=1.0     # Opacity for the active window (0.0 - 1.0)
unfocused_opacity=1.0   # Opacity for inactive windows

# See https://mangowc.vercel.app/docs/visuals/animations#durations
animation_duration_move=500  # 500 is default
animation_duration_open=400  # Window Open. 400 is default
animation_duration_tag=350   # Tag Switch. 350 is default.
animation_duration_close=800 # Window Close. 800 is default.
animation_duration_focus=0   # Focus Change. 0 is default.

# See https://mangowc.vercel.app/docs/visuals/animations#custom-bezier-curves
animation_curve_open=0.46,1.0,0.29,1
animation_curve_move=0.46,1.0,0.29,1
animation_curve_tag=0.46,1.0,0.29,1
animation_curve_close=0.08,0.92,0,1
animation_curve_focus=0.46,1.0,0.29,1
animation_curve_opafadeout=0.5,0.5,0.5,0.5
animation_curve_opafadein=0.46,1.0,0.29,1

# See https://mangowc.vercel.app/docs/window-management/layouts#scroller-layout
scroller_structs=20                    # Width reserved on sides when window ratio is 1. Default is 20
scroller_default_proportion=0.8        # Default width proportion for new windows. Default is 0.8
scroller_focus_center=0                # Always center the focused window (1 = enable).
scroller_prefer_center=0               # Center focused window only if it was outside the view.
edge_scroller_pointer_focus=1          # Focus windows even if partially off-screen.
scroller_default_proportion_single=1.0 # Default proportion for single windows in scroller. Default is 1.0
scroller_proportion_preset=0.5,0.8,1.0 # Presets for cycling window widths. Default is 0.5,0.8,1.0

# See https://mangowc.vercel.app/docs/window-management/layouts#master-stack-layouts
new_is_master=0            # New windows become the master window.
default_mfact=0.55         # The split ratio between master and stack areas. Default is 0.55
default_nmaster=1          # Number of allowed master windows.
smartgaps=1                # Disable gaps when only one window is present.
center_master_overspread=0 # (Center Tile) Master spreads across screen if no stack exists.
center_when_single_stack=1 # (Center Tile) Center master when only one stack window exists.

# See https://mangowc.vercel.app/docs/window-management/overview#overview-settings
hotarea_size=10  # Hot area size in pixels. Default is 10
enable_hotarea=1 # Enable hot areas (0-disable, 1-enable).
ov_tab_mode=1    # Overview tab mode (0-disable, 1-enable)
overviewgappi=5  # Inner gap in overview mode. Default is 5.
overviewgappo=30 # Outer gap in overview mode. Default is 30

# See https://mangowc.vercel.app/docs/configuration/miscellaneous
no_border_when_single=1      # Remove window borders when only one window is visible on the tag.
axis_bind_apply_timeout=100  # Timeout (ms) for detecting consecutive scroll events for axis bindings.
focus_on_activate=1          # Automatically focus windows when they request activation.
idleinhibit_ignore_visible=0 # Allow invisible clients (e.g., background audio players) to inhibit idle.
sloppyfocus=1                # Focus follows the mouse cursor.
warpcursor=1                 # Warp the cursor to the center of the window when focus changes via keyboard.
focus_cross_monitor=0        # Allow directional focus to cross monitor boundaries.
focus_cross_tag=0            # Allow directional focus to cross into other tags.
enable_floating_snap=0       # Snap floating windows to edges or other windows.
snap_distance=30             # Max distance (pixels) to trigger floating snap.
cursor_size=24               # Set cursor size.
drag_tile_to_tile=1          # Allow dragging a tiled window onto another to swap their positions.

# See https://mangowc.vercel.app/docs/configuration/input#keyboard-settings
repeat_rate=25              # How many times a key repeats per second.
repeat_delay=600            # Delay (ms) before a held key starts repeating.
numlockon=0                 # Enable NumLock on startup.
# It's my personal layout. See
# https://strcat.de/blog/sonderzeichen-mit-us-layout-eingeben.html for details
xkb_rules_layout=us_de
# Fuck caps and rebind it. Take a quick look at base.lst or just use
#   $ grep 'caps' /usr/share/X11/xkb/rules/base.lst
# I prefer DEAD TO ALL CAPS!!!111!
xkb_rules_options=caps:none

# See https://mangowc.vercel.app/docs/visuals/theming#dimensions
gappih=5
gappiv=5
gappoh=10
gappov=10
borderpx=2
rootcolor=141318ff
bordercolor=484551ff
focuscolor=9b8ee8ff
urgentcolor=ffb4abff
scratchpadcolor=ffade0ff
globalcolor=4a4567ff
overlaycolor=d67cb7ff

# See https://github.com/DreamMaoMao/mangowc/wiki#key-bindings
# Hello, hello, .. turn the monitors on.. or off. idc
bind=SUPER+SHIFT,m,spawn, wlr-dpms toggle

# Open my Clipboardmanager <https://github.com/savedra1/clipse> and
# make it float again
bind=Alt,Insert,spawn, $TERM --app-id="clipse" -e clipse

# Set new random wallpaper. Its just following onliner
# $ rwpspread -p --backend swaybg --image ~/.dualwallpapers/
bind=SHIFT,F12, spawn, ~/bin/mangowp.sh

# rmpc <https://rmpc.mierak.dev/>
bind=SHIFT,F5,spawn,rmpc prev
bind=SHIFT,F6,spawn,rmpc togglepause
bind=SHIFT,F7,spawn,rmpc next

# My browser
bind=SHIFT,F9,spawn,$BROWSER

# Reload config
bind=SUPER,r,reload_config

# Start programs <https://github.com/davatorium/rofi>
bind=Alt,p,spawn,rofi -show drun

# Launch my terminal <https://codeberg.org/dnkl/foot>
bind=Alt,Return,spawn,$TERM

# Exit mango
bind=SUPER,m,quit

# Kill window
bind=ALT,q,killclient,

# Open my layoutswitcher
bind = SUPER,l, spawn, ~/bin/mangolayoutswitcher.sh

# See https://mangowc.vercel.app/docs/bindings/keys#focus--movement
bind=ALT,h,focusdir,left
bind=ALT,l,focusdir,right
bind=ALT,k,focusdir,up
bind=ALT,j,focusdir,down

# swap window
bind=SUPER+ALT,k,exchange_client,up
bind=SUPER+ALT,j,exchange_client,down
bind=SUPER+ALT,h,exchange_client,left
bind=SUPER+ALT,l,exchange_client,right

# Switch window status..es. There are some more: togglefakefullscreen,
# togglefullscreen, minimized, floating, .. but i use them very rarely, so..
bind=ALT,Tab,toggleoverview,
bind=ALT,backslash,togglefloating,
bind=ALT,m,togglemaximizescreen,

# scroller layout
bind=ALT,e,set_proportion,1.0        # Set scroller window proportion
bind=ALT,x,switch_proportion_preset, # Cycle proportion presets of scroller window

# tag switch
bind=SUPER,Left,viewtoleft,0
bind=SUPER,Right,viewtoright,0
bind=CTRL+SUPER,Left,tagtoleft,0
bind=CTRL+SUPER,Right,tagtoright,0

# View specific tags
bind=Alt,1,view,1,0
bind=Alt,2,view,2,0
bind=Alt,3,view,3,0
bind=Alt,4,view,4,0
bind=Alt,5,view,5,0
bind=Alt,6,view,6,0
bind=Alt,7,view,7,0
bind=Alt,8,view,8,0
bind=Alt,9,view,9,0

# tag: move client to the tag and focus it
bind=SUPER,1,tag,1
bind=SUPER,2,tag,2
bind=SUPER,3,tag,3
bind=SUPER,4,tag,4
bind=SUPER,5,tag,5
bind=SUPER,6,tag,6
bind=SUPER,7,tag,7
bind=SUPER,8,tag,8
bind=SUPER,9,tag,9

# tagsilent: move client to the tag and not focus it
# Example: bind=SUPER,1,tagsilent,1
bind=SUPER+Alt,1,tagsilent,1
bind=SUPER+Alt,2,tagsilent,2
bind=SUPER+Alt,3,tagsilent,3
bind=SUPER+Alt,4,tagsilent,4
bind=SUPER+Alt,5,tagsilent,5
bind=SUPER+Alt,6,tagsilent,6
bind=SUPER+Alt,7,tagsilent,7
bind=SUPER+Alt,8,tagsilent,8
bind=SUPER+Alt,9,tagsilent,9

# See https://mangowc.vercel.app/docs/bindings/keys#syntax
# Switches the focus to monitor left/right. "59" and "60" are keycodes for comma
# and period ("," and "."). So "Alt+." switches to my left monitor and "Alt+,"
# to my right monitor (just like in DWM). You can use "xev -event keyboard" and 
# look for "keycode"
bind=alt,code:60,focusmon,left
bind=alt,code:59,focusmon,right

# Move client to monitor left/right
bind=SUPER+Alt,code:60,tagmon,left
bind=SUPER+Alt,code:59,tagmon,right

# Manipulate the gaps
# I'll forgo that because i use it too infrequently.
# bind=ALT+SHIFT,X,incgaps,1
# bind=ALT+SHIFT,Z,incgaps,-1
# bind=ALT+SHIFT,R,togglegaps

# movewin
bind=CTRL+SHIFT,Left,movewin,-50,+0
bind=CTRL+SHIFT,Right,movewin,+50,+0

# I dont need it often, but still..
bind=CTRL+ALT,k,resizewin,+0,-50
bind=CTRL+ALT,j,resizewin,+0,+50
bind=CTRL+ALT,h,resizewin,-50,+0
bind=CTRL+ALT,l,resizewin,+50,+0

# See Binds for using the mouse wheel. Press SUPER and scroll
# with the mouse wheel through all clientlists
axisbind=SUPER,UP,viewtoleft_have_client
axisbind=SUPER,DOWN,viewtoright_have_client

# layer rule
layerrule=animation_type_open:zoom,layer_name:rofi
layerrule=animation_type_close:zoom,layer_name:rofi


# Floating Picture-in-Picture
# windowrule=title:Picture\-in\-Picture,isfloating:1,isglobal:1,isoverlay:1,isopensilent:1
# windowrule=title:Picture\-in\-Picture,height:300,width:500,offsetx:100,offsety:100
# windowrule=title:Picture\-in\-Picture,animation_type_open:none,animation_type_close:none
windowrule=isfloating:1,offsetx:-50-50,offsety:-50-50,title:^([Pp]icture[-\s]?[Ii]n[-\s]?[Pp]icture)(.*)$

# Some Popups (mostly browser)
windowrule=isfloating:1,title:^(Open File)(.*)$
windowrule=isfloating:1,title:^(Select a File)(.*)$
windowrule=isfloating:1,title:^(Choose wallpaper)(.*)$
windowrule=isfloating:1,title:^(Open Folder)(.*)$
windowrule=isfloating:1,title:^(Save As)(.*)$
windowrule=isfloating:1,title:^(Library)(.*)$
windowrule=isfloating:1,title:^(File Upload)(.*)$

# My Clipboardmanager
windowrule = appid:clipse,isoverlay:1,isfloating:1,width:622,height:652
# mpv on tag1
windowrule=monitor:HDMI-A-2,tags:1,noswallow:1,isfullscreen:1,appid:mpv
# tmux on tag2
windowrule=monitor:HDMI-A-2,tags:2,appid:TMUX
# $BROWSER on tag3
# isopensilent = Open without focus
# istagsilent = Dont focus if client is not in current view tag
windowrule=monitor:HDMI-A-2,tags:3,appid:(zen|firefox),isopensilent:1,istagsilent:1
# tor-browser on my other monitor
windowrule=monitor:DP-1,tags:1,appid:Tor Browser,isopensilent:1,istagsilent:1

# tag1: vertical scrolling layout
tagrule=id:1,layout_name:vertical_scroller,monitor_name:HDMI-A-2,no_hide:1
tagrule=id:2,layout_name:tile,monitor_name:HDMI-A-2,no_hide:1
tagrule=id:3,layout_name:tile,monitor_name:HDMI-A-2,no_hide:1
tagrule=id:4,layout_name:tile,monitor_name:HDMI-A-2,no_hide:1
tagrule=id:5,monitor_name:DP-1,no_hide:1
tagrule=id:6,monitor_name:DP-1,no_hide:1
